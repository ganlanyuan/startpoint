{# breadcrumb #}
{% macro breadcrumb (arr, class) %}
<nav class="breadcrumb {{ class if class }}" role="navigation" aria-label="You are here:"
  itemscope itemtype="http://schema.org/BreadcrumbList">
  {% if arr[0] !== 'Home' %}
    {% set len = arr | unshiftToArray('Home') %}
  {% endif %}

  {% for item in arr %}
  <span itemprop="itemListElement"
        itemscope itemtype="http://schema.org/ListItem">

    {% if loop.last %}
    <span {{ 'aria-current="page"' | safe if loop.last }} itemprop="item">
    {% else %}
    <a href="{{ links[item] }}.html" itemprop="item">
    {% endif %}

      {% if loop.last %}<span class="visually-hidden">Current: </span>{% endif %}
      <span itemprop="name">{{ item }}</span>

    {% if loop.last %}
    </span>
    {% else %}
    </a>
    {% endif %}

    <meta itemprop="position" content="{{ loop.index }}" />
  </span>
  {% endfor %}
</nav>
{% endmacro %}













{# get image height #}
{% macro imgHeight(width, ratio = [3, 2]) %}
  {{- (width * ratio[1] / ratio[0]) | round -}}
{% endmacro %}


{%- macro srcset(src, ws, ratio) -%}
  {% set str = '' %}
  {%- for w in ws -%}
    {% set str = str + src + w + '_' + imgHeight(w, ratio) + ' ' + w + 'w' %}

    {%- if not loop.last -%}
    {% set str = str + ', ' %}
    {%- endif -%}
  {%- endfor -%}

  {{- str -}}
{%- endmacro -%}


{# get image srcset #}
{% macro imgSrcset(id, sizes, hasGutter = true, ratio = [2, 3]) %}
  {% for size in sizes %}
    {% set width = size - globalGutter if hasGutter and not loop.last else size %}

    {{ images[id] }}?w={{ width }}&amp;h={{ (width * ratio[0] / ratio[1]) | round }} {{ width }}w{{', ' if not loop.last}}
  {% endfor %}"
{% endmacro %}



{%- macro ad(size) -%}
  {{- 'http://url.com/banner/' + size + '/' + get(size) + '.png' -}}
{%- endmacro -%}

{% macro ads(width = 300, height = 250, class = '') %}
  {% set size_str = width + 'x' + height %}
  {% set url_str = ad(size_str)  %}

  <div class="ad {{ class }}"><a href="" {{ rel_str | safe }}><img src="{{ url_str }}" alt="" width="{{ width }}" height="{{ height }}"></a></div>
{% endmacro %}
